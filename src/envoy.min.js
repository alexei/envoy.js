/*! envoy.js | Copyright (c) 2013 Alexandru Marasteanu <hello at alexei dot ro> | 3 clause BSD license */(function(e,t){t=function(n,r){return r=this,r===e?new t(n):(r.w=r===t?e:new Worker(n),r.w.addEventListener("message",function(e){r.e[e.data.t]&&r.e[e.data.t].forEach(function(t){t.apply(null,e.data.d)})},!1),r.e={},r)},t.prototype={on:function(e,t){!this.e[e]&&(this.e[e]=[]),this.e[e][this.e[e].length]=t},off:function(e,t){this.e[e].filter(function(e){return e!==t})},emit:function(){var e=[].slice.call(arguments);this.w.postMessage({t:e.shift(),d:e})}},Object.keys(t.prototype).forEach(function(e){t[e]=function(){t.prototype[e].apply(t,arguments)}}),e.envoy=t.call(t)})(this);